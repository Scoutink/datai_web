.site-header {
  position: fixed;
  inset: 0 0 auto 0;
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 20px;
  background: color-mix(in srgb, var(--white) 92%, var(--blue-50));
  border-bottom: 1px solid var(--gray-200);
  box-shadow: var(--shadow-card);
  backdrop-filter: blur(8px);
  z-index: 300;
}
.brand { display: flex; align-items: center; gap: 10px; }
.brand img { height: 32px; width: auto; }
.brand-title { font: 600 1.15rem 'Lora', serif; color: var(--blue-900); }
.header-right { display: flex; align-items: center; gap: 14px; }
.header-label { font: 500 0.75rem 'Fira Code', monospace; color: var(--blue-700); }
#chapter-counter { font-weight: 600; color: var(--gray-800); }

.layout {
  padding-top: 60px;
  min-height: 100vh;
}

.sidebar {
  position: fixed;
  top: 60px;
  left: 0;
  width: var(--sidebar-w);
  height: calc(100vh - 60px);
  background: linear-gradient(175deg, color-mix(in srgb, var(--white) 92%, var(--blue-50)), var(--white));
  border-right: 1px solid var(--gray-200);
  overflow: auto;
  z-index: 220;
  box-shadow: 8px 0 24px rgba(13, 59, 110, 0.06);
}
.sidebar::before {
  content: '';
  position: sticky;
  top: 6px;
  display: block;
  margin: 10px 14px;
  height: 72px;
  border-radius: var(--radius-sm);
  background:
    radial-gradient(circle at 20% 40%, rgba(33,150,243,.22), transparent 60%),
    radial-gradient(circle at 80% 70%, rgba(38,198,176,.18), transparent 55%),
    linear-gradient(135deg, rgba(255,255,255,.9), rgba(221,238,255,.4));
  border: 1px solid color-mix(in srgb, var(--gray-200) 80%, var(--white));
  box-shadow: inset 0 1px 0 rgba(255,255,255,.8), 0 8px 18px rgba(21,101,192,.09);
  pointer-events: none;
  z-index: 1;
}

#sidebar-progress { height: 4px; background: linear-gradient(90deg, var(--blue-700), var(--teal-400)); width: 0%; position: sticky; top: 0; z-index: 5; }
.chapter-list { list-style: none; margin: 0; padding: 10px 10px 14px; }
.chapter-item a {
  position: relative;
  display: grid;
  grid-template-columns: 26px 1fr 10px;
  align-items: center;
  gap: 10px;
  text-decoration: none;
  color: var(--gray-800);
  padding: 11px 12px;
  margin-bottom: 5px;
  border-left: 3px solid transparent;
  border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
  transition: transform .2s ease, background .2s ease;
}
.chapter-item a:hover { background: var(--blue-50); transform: translateX(2px); }
.chapter-item.active a {
  border-left-color: var(--blue-700);
  background: linear-gradient(90deg, var(--blue-50), color-mix(in srgb, var(--blue-50) 70%, var(--white)));
  color: var(--blue-700);
  font-weight: 700;
  box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--blue-100) 70%, var(--white));
}
.num-badge {
  width: 24px; height: 24px; border-radius: 50%; background: linear-gradient(145deg, var(--blue-700), var(--blue-500)); color: var(--white);
  font: 500 0.72rem/24px 'Fira Code', monospace; text-align: center;
  box-shadow: 0 4px 10px rgba(21,101,192,.24);
}
.complete-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--gray-200); }
.chapter-item.completed .complete-dot { background: var(--teal-600); box-shadow: 0 0 0 4px color-mix(in srgb, var(--teal-400) 30%, transparent); }

.sidebar-footer {
  border-top: 1px solid var(--gray-200);
  margin: 8px 14px 14px;
  padding: 14px 0 0;
  color: var(--gray-500);
  font: 400 0.75rem 'Fira Code', monospace;
}
.sidebar-footer img { height: 22px; margin-bottom: 8px; }

.content {
  margin-left: var(--sidebar-w);
  width: calc(100% - var(--sidebar-w));
  padding: 28px clamp(20px, 4vw, 48px) 80px;
}
.content-inner { max-width: none; margin: 0; width: 100%; }

#hero {
  min-height: 100vh;
  position: relative;
  border-radius: var(--radius);
  overflow: hidden;
  background: linear-gradient(160deg, var(--blue-100) 0%, var(--blue-50) 60%, #E8F5E9 100%);
  padding: clamp(28px, 6vw, 64px);
  margin-bottom: 40px;
}
#hero-canvas { position: absolute; inset: 0; z-index: 0; pointer-events: none; }
.hero-content { position: relative; z-index: 1; width: 100%; max-width: min(1200px, 100%); margin-inline: auto; }
.hero-badge { display: inline-block; font: 500 0.72rem 'Fira Code', monospace; letter-spacing: 0.2em; color: var(--blue-700); background: var(--blue-100); padding: 4px 10px; border-radius: 4px; }
.hero-subtitle { font-size: 1.2rem; font-weight: 300; max-width: 52ch; }
.hero-meta { display: flex; flex-wrap: wrap; gap: 8px; color: var(--gray-500); font: 400 0.83rem 'Fira Code', monospace; margin-bottom: 20px; }
.hero-quick-start { border: 1px solid var(--gray-200); background: rgba(255,255,255,0.85); border-radius: var(--radius); padding: 24px; margin-bottom: 20px; }
.hero-quick-start ol { margin: 0; padding-left: 22px; }
.hero-quick-start strong { color: var(--blue-700); }
.hero-cta { display: inline-block; background: var(--blue-700); color: var(--white); font: 600 1rem 'Lora', serif; padding: 10px 18px; border-radius: var(--radius-sm); text-decoration: none; transition: transform .2s, box-shadow .2s; }
.hero-cta:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(21,101,192,0.3); }
.hero-dashboard { width: 100%; max-width: 860px; border-radius: var(--radius); border: 1px solid var(--gray-200); box-shadow: 0 16px 64px rgba(21,101,192,0.18); margin-top: 40px; transform: perspective(1400px) rotateX(5deg); }

.chapter { padding: 24px 0 32px; position: relative; }

.chapter-body { width: 100%; max-width: min(1200px, 100%); margin-inline: auto; padding: 4px 0; }

.chapter + .chapter-divider { margin: 18px 0 24px; border: none; height: 1px; background: linear-gradient(90deg, var(--blue-100), transparent); }
.watermark { text-align: center; font: italic 700 4rem 'Lora', serif; color: rgba(13, 59, 110, 0.1); margin-bottom: 10px; }

.manual-end {
  margin-top: 24px;
  text-align: center;
  padding: 80px 40px;
  background: linear-gradient(145deg, var(--blue-50), #E0F7F4);
  border-radius: var(--radius) var(--radius) 0 0;
}
.manual-end-icon { font-size: 2rem; color: var(--teal-400); }
.manual-version { font: 400 .84rem 'Fira Code', monospace; color: var(--gray-500); }

#sidebar-toggle { display: none; background: transparent; border: 1px solid var(--gray-200); border-radius: 6px; font-size: 1.2rem; width: 40px; height: 40px; }
#sidebar-backdrop { display: none; }

@media (max-width: 1023px) {
  .content { margin-left: 0; width: 100%; }
  #sidebar-toggle { display: inline-flex; align-items: center; justify-content: center; }
  .sidebar { transform: translateX(-100%); transition: transform 0.3s ease; width: min(88vw, 360px); z-index: 350; }
  body.sidebar-open .sidebar { transform: translateX(0); }
  #sidebar-backdrop { position: fixed; inset: 60px 0 0 0; background: rgba(26,35,50,0.35); z-index: 320; }
  body.sidebar-open #sidebar-backdrop { display: block; }
}

@media (max-width: 767px) {
  .site-header { height: 56px; }
  .layout { padding-top: 56px; }
  .sidebar { top: 56px; height: calc(100vh - 56px); }
  .header-right .header-label, .header-right #chapter-counter { display: none; }
  .hero-dashboard { transform: none; }
}
